# Smiley-Android-App

<hr>

<div align="center">
   <img src="https://raw.githubusercontent.com/Donghyeon0915/DataRepository/master/Smiley/smiley_cover.png" width="100%"/> &nbsp;&nbsp;
</div>

## 💡 주제

- 교정 자동화 & 관리 어플리케이션
- BLE + 압력 센서를 이용한 주걱턱 교정기, 교정기 케이스 착용 시간 측정

---

## 📝 설명

***Smiley***는 사용자의 **교정기 착용 여부** 및 **착용 시간**을 **실시간**으로 감지하여 교정 관리를 **자동화**하며, 

**착용 시간 관리, 일일 미션, 예약 관리, 챗봇 상담** 등 **교정에 관한 모든 편의기능을 앱에서 제공**합니다.

---

## ✨ 주요 기능

- **교정 장치 착용 시간 측정**
    - BLE 센서와 압력 센서를 통해 교정 장치 착용 여부 및 시간을 측정합니다.
    - 교정기 착용을 앱으로 관리할 수 있습니다.
- **안면 상태 측정**
    - 인공지능을 통해 안면 상태를 자세히 분석합니다.
    - 변화 과정을 한 눈에 볼 수 있어 동기부여를 극대화할 수 있습니다.
- **티어 & 뱃지 시스템**
    - 교정기 착용 시간, 일일 미션 달성 등 여러 활동으로 경험치와 뱃지를 획득할 수 있습니다.
    - 사용자가 더 이상 교정을 치료로 느끼지 않고 재미 요소로 느낄 수 있도록 하기 위한 기능입니다.
- **병원 예약 관리**
    - 병원 예약 관리 및 길 찾기 기능을 제공합니다.
    - 병원에 예약을 하고, 찾아가기 위해 다른 어플을 쓸 필요가 없습니다.
- **약품 성분 검사**
    - 치아 이동에 영향을 주는 약품을 판별합니다.
    - 의사의 상담을 받기 힘든 상황에서 급히 약을 복용 해야 할 때 유용한 기능입니다.
- **챗봇 상담 & FAQ**
    - 앱 내에서 교정에 관한 대부분의 정보를 얻을 수 있습니다.
    - 교정 중 궁금한 사항이 생겨도 병원 진료 날짜까지 기다리지 않아도 됩니다.

---

## 🫂 팀 협업 방식

- **Github Issue & Pull-Request** 관리를 통해 팀원 간의 업무 파악 및 진행 사항을 기록하고, 디자인, 프론트, 백엔드 파트들 간의 협업을 위해 **Figma, Swagger** 등의 툴을 사용하였습니다.
- **Github CI/CD**를 통해 통합 및 배포 환경을 자동화하였으며, 코딩 컨벤션을 맞추는 등의 방식으로 더 나은 코드를 작성할 수 있도록 노력하였습니다.

---

## 😀 새로 적용된 기술

### 1. Clean Architecture, Multi-Module

### 2. Github Actions를 통한 CI/CD

### 3. Coroutine-Flow

### 4. Hilt

### 5. StateFlow를 통한 UI 상태 관리

---

## 🤗 트러블 슈팅

> 💡 **내부 DB를 활용한 네트워크 요청 최적화**

- 서버로의 트래픽 집중 문제를 해결하기 위해, 날짜별 착용 시간을 내부 DB에 저장하고 사용자가 앱에 접속 시 미 전송 데이터만 서버로 보내도록 로직을 개선했습니다.
- 결과적으로, 트래픽이 분산되어 서버의 대용량 트래픽 처리 능력이 향상되었습니다.


> 💡 **검색 시 서버 부하를 고려한 캐시 전략 (평균 응답 시간 2,000ms → 200ms)**

- 앱에서 공공 데이터 포탈로부터 많은 의약품 및 병원 정보를 불러와 초기 로딩 시간이 길고 서버 부담이 컸습니다.
- 이를 해결하기 위해 Retrofit을 사용해 데이터를 캐싱하고 expire time을 길게 주어 초기 응답 시간을 2,000ms에서 200ms로 대폭 줄였습니다.
- 이로 인해 서버의 부담이 감소하고 앱 성능이 개선되었습니다.


> 💡 **주변 병원 데이터 요청 최적화**

- 주변 치과 조회 기능에서 사용자의 위치가 변경되거나 지도가 움직일 때 주변 치과를 실시간으로 갱신해야 했습니다.
- 중복 요청을 최소화하기 위해 일정 반경 이상을 이동한 경우에만 갱신 요청을 보내도록 하였습니다.
- 또한, Coroutine과 Flow를 사용하여 비동기 처리를 통해 끊김 없이 화면을 유지하며 빠르게 데이터를 처리하였고, 결과적으로 사용자에게 부드러운 앱 경험을 제공하였습니다.


> 💡 **StateFlow 중간값 이슈**

- StateFlow를 사용해 UI 상태를 관리하던 중, 로딩 상태와 통신 결과 상태가 동시에 방출되어 로딩 값이 무시되는 현상이 발생했습니다.
- StateFlow가 중간값을 보장하지 않는다는 것이 원인이었음을 알게 되었습니다.
- 이를 해결하기 위해 로딩과 같은 UI 적인 부분은 상태 클래스로 만들지 않고 View에서 처리하도록 하여 문제를 해결했습니다.

## 📘 ERD

> 테이블 구조도

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2ee39848-40ce-4277-b5dc-c6816f970198/Untitled.png)
